# i18n (Internationalization) Guide

This guide explains how to work with internationalized content in Strapi using the MCP server.

## Overview

The Strapi MCP server fully supports Strapi's i18n plugin, allowing you to:
- Manage multiple locales
- Create and update localized content
- Query content by locale
- Handle locale-specific operations

## Prerequisites

1. Strapi i18n plugin must be installed and enabled
2. At least one locale must be configured (default is usually 'en')
3. Content types must have i18n enabled in their schema

## Locale Management

### List Available Locales

```javascript
use_mcp_tool(
  server_name: "strapi-mcp",
  tool_name: "list_locales",
  arguments: {}
)
```

Returns:
```json
[
  {
    "id": 1,
    "name": "English (en)",
    "code": "en",
    "isDefault": true
  },
  {
    "id": 2,
    "name": "French (fr)",
    "code": "fr",
    "isDefault": false
  }
]
```

### Create a New Locale

```javascript
use_mcp_tool(
  server_name: "strapi-mcp",
  tool_name: "create_locale",
  arguments: {
    "code": "es",
    "name": "Spanish (es)"
  }
)
```

### Delete a Locale

```javascript
use_mcp_tool(
  server_name: "strapi-mcp",
  tool_name: "delete_locale",
  arguments: {
    "id": 3
  }
)
```

**Note**: You cannot delete the default locale.

## Working with Localized Content

### Creating Localized Content

When creating content for an i18n-enabled content type, you can specify the locale:

```javascript
use_mcp_tool(
  server_name: "strapi-mcp",
  tool_name: "create_entry",
  arguments: {
    "pluralApiId": "articles",
    "data": {
      "title": "Mon Article",
      "content": "Contenu en français",
      "locale": "fr"
    }
  }
)
```

**Note**: If locale is not specified, the default locale will be used.

### Querying Content by Locale

Use the `locale` parameter in options to filter by locale:

```javascript
use_mcp_tool(
  server_name: "strapi-mcp",
  tool_name: "get_entries",
  arguments: {
    "pluralApiId": "articles",
    "options": JSON.stringify({
      "locale": "fr"
    })
  }
)
```

To get content in all locales:
```javascript
use_mcp_tool(
  server_name: "strapi-mcp",
  tool_name: "get_entries",
  arguments: {
    "pluralApiId": "articles",
    "options": JSON.stringify({
      "locale": "all"
    })
  }
)
```

### Getting a Specific Entry with Locale

```javascript
use_mcp_tool(
  server_name: "strapi-mcp",
  tool_name: "get_entry",
  arguments: {
    "pluralApiId": "articles",
    "documentId": "abc123",
    "options": JSON.stringify({
      "locale": "fr"
    })
  }
)
```

### Updating Localized Content

When updating, the locale context is maintained:

```javascript
use_mcp_tool(
  server_name: "strapi-mcp",
  tool_name: "update_entry",
  arguments: {
    "pluralApiId": "articles",
    "documentId": "abc123",
    "data": {
      "title": "Titre Mis à Jour"
    }
  }
)
```

## Content Type i18n Configuration

### Enabling i18n for a Content Type

When creating a content type, enable i18n in plugin options:

```javascript
use_mcp_tool(
  server_name: "strapi-mcp",
  tool_name: "create_content_type",
  arguments: {
    "displayName": "Article",
    "singularName": "article",
    "pluralName": "articles",
    "attributes": {
      "title": { 
        "type": "string", 
        "required": true,
        "pluginOptions": {
          "i18n": { "localized": true }
        }
      },
      "content": { 
        "type": "richtext",
        "pluginOptions": {
          "i18n": { "localized": true }
        }
      },
      "slug": { 
        "type": "string",
        "pluginOptions": {
          "i18n": { "localized": false }
        }
      }
    },
    "pluginOptions": {
      "i18n": {
        "localized": true
      }
    }
  }
)
```

### Field-Level Localization

- Fields with `localized: true` will have different values per locale
- Fields with `localized: false` share the same value across all locales
- By default, fields inherit the content type's localization setting

### Updating i18n Settings

```javascript
use_mcp_tool(
  server_name: "strapi-mcp",
  tool_name: "update_content_type",
  arguments: {
    "contentType": "api::article.article",
    "attributes": {
      "subtitle": {
        "type": "string",
        "pluginOptions": {
          "i18n": { "localized": true }
        }
      }
    }
  }
)
```

## Relations and i18n

### Localized Relations

Relations can be configured to be locale-specific or shared:

```javascript
{
  "categories": {
    "type": "relation",
    "relation": "manyToMany",
    "target": "api::category.category",
    "pluginOptions": {
      "i18n": { "localized": true }
    }
  }
}
```

### Cross-Locale Relations

When relations are not localized, they are shared across all locales of an entry.

## Best Practices

1. **Plan Localization Early**: Decide which fields need localization when designing content types
2. **Use Locale Codes**: Follow standard locale codes (e.g., 'en', 'fr', 'es', 'de')
3. **Default Locale**: Always have content in the default locale as a fallback
4. **Consistent Structure**: Keep the same content structure across locales
5. **Handle Missing Translations**: Check if content exists in requested locale

## Common Scenarios

### Creating Multilingual Blog

1. Create locales for each language
2. Create article content type with localized fields
3. Create articles in default language first
4. Add translations for other locales

### Product Catalog with Shared SKUs

```javascript
{
  "name": { 
    "type": "string",
    "pluginOptions": { "i18n": { "localized": true } }
  },
  "description": { 
    "type": "richtext",
    "pluginOptions": { "i18n": { "localized": true } }
  },
  "sku": { 
    "type": "string",
    "unique": true,
    "pluginOptions": { "i18n": { "localized": false } }
  },
  "price": { 
    "type": "decimal",
    "pluginOptions": { "i18n": { "localized": false } }
  }
}
```

### Finding All Translations of an Entry

Entries in different locales share the same `documentId` but have different `locale` values:

```javascript
// Get all locale versions
use_mcp_tool(
  server_name: "strapi-mcp",
  tool_name: "get_entries",
  arguments: {
    "pluralApiId": "articles",
    "options": JSON.stringify({
      "filters": {
        "documentId": "abc123"
      },
      "locale": "all"
    })
  }
)
```

## Troubleshooting i18n Issues

### "This locale already exists"
- Check existing locales with `list_locales`
- Delete the existing locale first if needed

### Content Not Appearing in Locale
- Verify the content type has i18n enabled
- Check if the specific fields are localized
- Ensure you're querying with the correct locale parameter

### Cannot Delete Locale
- Default locale cannot be deleted
- Locale with existing content may require content deletion first

### Mixed Locale Results
- Always specify locale in queries to avoid mixed results
- Use `locale: "all"` intentionally when needed